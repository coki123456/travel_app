{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/esteb/Desktop/travel_app/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nconst globalForPrisma = globalThis as unknown as { prisma?: PrismaClient };\n\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient();\n\nif (process.env.NODE_ENV !== \"production\") {\n  globalForPrisma.prisma = prisma;\n}\n\nexport default prisma;\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,kBAAkB;AAEjB,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,sMAAY;AAEhE,wCAA2C;IACzC,gBAAgB,MAAM,GAAG;AAC3B;uCAEe"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/esteb/Desktop/travel_app/app/day/%5Bdate%5D/DayForm.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/day/[date]/DayForm.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/day/[date]/DayForm.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA8R,GAC3T,4DACA","ignoreList":[0]}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/esteb/Desktop/travel_app/app/day/%5Bdate%5D/DayForm.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/day/[date]/DayForm.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/day/[date]/DayForm.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA0Q,GACvS,wCACA","ignoreList":[0]}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/esteb/Desktop/travel_app/app/day/%5Bdate%5D/ItemsBoard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/day/[date]/ItemsBoard.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/day/[date]/ItemsBoard.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAiS,GAC9T,+DACA","ignoreList":[0]}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/esteb/Desktop/travel_app/app/day/%5Bdate%5D/ItemsBoard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/day/[date]/ItemsBoard.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/day/[date]/ItemsBoard.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA6Q,GAC1S,2CACA","ignoreList":[0]}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/esteb/Desktop/travel_app/app/day/%5Bdate%5D/AttachmentsPanel.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/day/[date]/AttachmentsPanel.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/day/[date]/AttachmentsPanel.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAuS,GACpU,qEACA","ignoreList":[0]}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/esteb/Desktop/travel_app/app/day/%5Bdate%5D/AttachmentsPanel.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/day/[date]/AttachmentsPanel.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/day/[date]/AttachmentsPanel.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAmR,GAChT,iDACA","ignoreList":[0]}},
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/esteb/Desktop/travel_app/app/day/%5Bdate%5D/page.tsx"],"sourcesContent":["import Link from \"next/link\";\nimport { redirect } from \"next/navigation\";\nimport { cookies } from \"next/headers\";\nimport prisma from \"@/lib/prisma\";\nimport DayForm from \"./DayForm\";\nimport ItemsBoard from \"./ItemsBoard\";\nimport AttachmentsPanel from \"./AttachmentsPanel\";\n\nexport const dynamic = \"force-dynamic\";\n\ntype ItemView = {\n  id: string;\n  title: string;\n  description: string | null;\n  type: string;\n  block: string;\n};\n\nconst parseDateParam = (value: string) => {\n  const match = value.match(/^(\\d{4})-(\\d{2})-(\\d{2})/);\n  if (!match) return null;\n  const year = Number(match[1]);\n  const month = Number(match[2]);\n  const day = Number(match[3]);\n  if (!year || !month || !day) return null;\n\n  const date = new Date(year, month - 1, day, 0, 0, 0);\n  if (\n    Number.isNaN(date.valueOf()) ||\n    date.getFullYear() !== year ||\n    date.getMonth() !== month - 1 ||\n    date.getDate() !== day\n  ) {\n    return null;\n  }\n\n  return date;\n};\n\nexport default async function DayPage({\n  params,\n}: {\n  params: Promise<{ date?: string }>;\n}) {\n  const cookieStore = await cookies();\n  const activeTripId = cookieStore.get(\"activeTripId\")?.value;\n  const trip = activeTripId\n    ? await prisma.trip.findUnique({ where: { id: activeTripId } })\n    : null;\n\n  if (!trip) {\n    redirect(\"/setup\");\n  }\n\n  const resolvedParams = await params;\n  const dateParam = resolvedParams?.date ?? \"\";\n  const dayStart = parseDateParam(dateParam);\n  if (!dayStart) {\n    return (\n      <div className=\"min-h-screen bg-transparent px-6 py-10 text-slate-100\">\n        <div className=\"mx-auto w-full max-w-4xl rounded-3xl border border-slate-800 bg-slate-900/70 p-8 shadow-lg shadow-black/30\">\n          <h1 className=\"text-2xl font-semibold text-slate-100\">\n            Fecha invalida\n          </h1>\n          <p className=\"mt-3 text-sm text-slate-300\">\n            Usa el formato YYYY-MM-DD.\n          </p>\n          <Link\n            href=\"/\"\n            className=\"mt-6 inline-flex items-center justify-center rounded-2xl bg-cyan-400 px-5 py-3 text-sm font-semibold text-slate-950 transition hover:bg-cyan-300\"\n          >\n            Volver al calendario\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  const nextDay = new Date(dayStart);\n  nextDay.setDate(nextDay.getDate() + 1);\n\n  const day = await prisma.day.findFirst({\n    where: {\n      tripId: trip.id,\n      date: {\n        gte: dayStart,\n        lt: nextDay,\n      },\n    },\n    include: {\n      items: {\n        orderBy: [{ block: \"asc\" }, { orderIndex: \"asc\" }],\n      },\n      attachments: {\n        orderBy: { createdAt: \"desc\" },\n      },\n    },\n  });\n\n  const items: ItemView[] =\n    day?.items.map((item) => ({\n      id: item.id,\n      title: item.title,\n      description: item.description,\n      type: item.type,\n      block: item.block,\n    })) ?? [];\n\n  const attachments =\n    day?.attachments.map((attachment) => ({\n      id: attachment.id,\n      fileName: attachment.fileName,\n      mimeType: attachment.mimeType,\n      sizeBytes: attachment.sizeBytes,\n      path: attachment.path,\n    })) ?? [];\n\n  const label = dayStart.toLocaleDateString(\"es-AR\", {\n    weekday: \"long\",\n    day: \"2-digit\",\n    month: \"long\",\n    year: \"numeric\",\n  });\n\n  return (\n    <div className=\"min-h-screen bg-transparent px-5 py-8 text-slate-100 sm:px-6 sm:py-10 md:px-8 md:py-12\">\n      <div className=\"mx-auto flex w-full max-w-6xl flex-col gap-8 md:gap-10\">\n        <header className=\"flex flex-col gap-4\">\n          <Link\n            href=\"/\"\n            className=\"text-xs font-semibold uppercase tracking-[0.3em] text-slate-500\"\n          >\n            Volver al calendario\n          </Link>\n          <div className=\"rounded-3xl border border-slate-800 bg-slate-900/70 p-6 shadow-lg shadow-black/30\">\n            <p className=\"text-xs font-semibold uppercase tracking-[0.3em] text-slate-500\">\n              {trip.name}\n            </p>\n            <h1 className=\"mt-3 text-3xl font-semibold tracking-tight text-slate-100\">\n              {label}\n            </h1>\n          </div>\n        </header>\n\n        <section className=\"grid gap-6 md:gap-8 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]\">\n          <div className=\"flex flex-col gap-6\">\n            <ItemsBoard date={dateParam} items={items} />\n          </div>\n\n          <aside className=\"flex flex-col gap-4\">\n            <DayForm\n              date={dateParam}\n              initialCity={day?.city ?? null}\n              initialSummary={day?.summary ?? null}\n              initialJournal={day?.journal ?? null}\n            />\n            <AttachmentsPanel date={dateParam} attachments={attachments} />\n          </aside>\n        </section>\n      </div>\n    </div>\n  );\n}\r\n"],"names":[],"mappings":"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"}}]
}