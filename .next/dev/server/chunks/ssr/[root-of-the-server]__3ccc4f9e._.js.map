{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/esteb/Desktop/travel_app/app/day/%5Bdate%5D/DayForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\n\ntype DayFormProps = {\n  date: string;\n  initialCity: string | null;\n  initialSummary: string | null;\n  initialJournal: string | null;\n};\n\nexport default function DayForm({\n  date,\n  initialCity,\n  initialSummary,\n  initialJournal,\n}: DayFormProps) {\n  const router = useRouter();\n  const [city, setCity] = useState(initialCity ?? \"\");\n  const [summary, setSummary] = useState(initialSummary ?? \"\");\n  const [journal, setJournal] = useState(initialJournal ?? \"\");\n  const [error, setError] = useState<string | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const onSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    setError(null);\n    setIsSubmitting(true);\n\n    try {\n      const response = await fetch(\"/api/days\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          date,\n          city,\n          summary,\n          journal,\n        }),\n      });\n\n      if (!response.ok) {\n        const data = await response.json().catch(() => null);\n        setError(data?.error ?? \"No se pudo guardar el dia.\");\n        return;\n      }\n\n      router.refresh();\n    } catch (err) {\n      setError(\"No se pudo conectar con el servidor.\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <form\n      onSubmit={onSubmit}\n      className=\"rounded-3xl border border-slate-800 bg-slate-900/70 p-6 shadow-lg shadow-black/30\"\n    >\n      <div className=\"flex flex-col gap-5\">\n        <div>\n          <label className=\"text-sm font-semibold text-slate-200\">\n            Ciudad (opcional)\n          </label>\n          <input\n            className=\"mt-2 w-full rounded-2xl border border-slate-700 bg-slate-950/40 px-4 py-3 text-sm text-slate-100 outline-none transition focus:border-cyan-400/70\"\n            placeholder=\"Ej: Bariloche\"\n            value={city}\n            onChange={(event) => setCity(event.target.value)}\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-semibold text-slate-200\">\n            Resumen del dia\n          </label>\n          <textarea\n            rows={3}\n            className=\"mt-2 w-full rounded-2xl border border-slate-700 bg-slate-950/40 px-4 py-3 text-sm text-slate-100 outline-none transition focus:border-cyan-400/70\"\n            placeholder=\"Ej: Trekking y cena en el centro.\"\n            value={summary}\n            onChange={(event) => setSummary(event.target.value)}\n          />\n        </div>\n\n        <div>\n          <label className=\"text-sm font-semibold text-slate-200\">\n            Diario del dia\n          </label>\n          <textarea\n            rows={6}\n            className=\"mt-2 w-full rounded-2xl border border-slate-700 bg-slate-950/40 px-4 py-3 text-sm text-slate-100 outline-none transition focus:border-cyan-400/70\"\n            placeholder=\"Notas mas largas del dia.\"\n            value={journal}\n            onChange={(event) => setJournal(event.target.value)}\n          />\n        </div>\n\n        {error ? (\n          <div className=\"rounded-2xl border border-rose-500/30 bg-rose-500/10 px-4 py-3 text-sm text-rose-200\">\n            {error}\n          </div>\n        ) : null}\n\n        <button\n          type=\"submit\"\n          disabled={isSubmitting}\n          className=\"rounded-2xl bg-cyan-400 px-5 py-3 text-sm font-semibold text-slate-950 transition hover:bg-cyan-300 disabled:cursor-not-allowed disabled:opacity-70\"\n        >\n          {isSubmitting ? \"Guardando...\" : \"Guardar dia\"}\n        </button>\n      </div>\n    </form>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAYe,SAAS,QAAQ,EAC9B,IAAI,EACJ,WAAW,EACX,cAAc,EACd,cAAc,EACD;IACb,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC,eAAe;IAChD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC,kBAAkB;IACzD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC,kBAAkB;IACzD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,MAAM,WAAW,OAAO;QACtB,MAAM,cAAc;QACpB,SAAS;QACT,gBAAgB;QAEhB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,aAAa;gBACxC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB;oBACA;oBACA;oBACA;gBACF;YACF;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,OAAO,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM;gBAC/C,SAAS,MAAM,SAAS;gBACxB;YACF;YAEA,OAAO,OAAO;QAChB,EAAE,OAAO,KAAK;YACZ,SAAS;QACX,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,qBACE,8OAAC;QACC,UAAU;QACV,WAAU;kBAEV,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;;sCACC,8OAAC;4BAAM,WAAU;sCAAuC;;;;;;sCAGxD,8OAAC;4BACC,WAAU;4BACV,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,QAAU,QAAQ,MAAM,MAAM,CAAC,KAAK;;;;;;;;;;;;8BAInD,8OAAC;;sCACC,8OAAC;4BAAM,WAAU;sCAAuC;;;;;;sCAGxD,8OAAC;4BACC,MAAM;4BACN,WAAU;4BACV,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,QAAU,WAAW,MAAM,MAAM,CAAC,KAAK;;;;;;;;;;;;8BAItD,8OAAC;;sCACC,8OAAC;4BAAM,WAAU;sCAAuC;;;;;;sCAGxD,8OAAC;4BACC,MAAM;4BACN,WAAU;4BACV,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,QAAU,WAAW,MAAM,MAAM,CAAC,KAAK;;;;;;;;;;;;gBAIrD,sBACC,8OAAC;oBAAI,WAAU;8BACZ;;;;;2BAED;8BAEJ,8OAAC;oBACC,MAAK;oBACL,UAAU;oBACV,WAAU;8BAET,eAAe,iBAAiB;;;;;;;;;;;;;;;;;AAK3C"}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/esteb/Desktop/travel_app/app/day/%5Bdate%5D/ItemsBoard.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRouter } from \"next/navigation\";\nimport { useMemo, useState } from \"react\";\n\ntype ItemView = {\n  id: string;\n  title: string;\n  description: string | null;\n  type: string;\n  block: string;\n};\n\ntype ItemsBoardProps = {\n  date: string;\n  items: ItemView[];\n};\n\nconst BLOCKS = [\n  { value: \"ALL_DAY\", label: \"Todo el dia\" },\n  { value: \"MORNING\", label: \"Manana\" },\n  { value: \"AFTERNOON\", label: \"Tarde\" },\n  { value: \"EVENING\", label: \"Noche\" },\n];\n\nconst ITEM_TYPES = [\n  { value: \"HOTEL\", label: \"Hotel\" },\n  { value: \"FLIGHT\", label: \"Vuelo\" },\n  { value: \"ATTRACTION\", label: \"Atraccion\" },\n  { value: \"FOOD\", label: \"Comida\" },\n  { value: \"TRANSFER\", label: \"Traslado\" },\n  { value: \"NOTE\", label: \"Nota\" },\n];\n\nconst getTypeLabel = (value: string) =>\n  ITEM_TYPES.find((type) => type.value === value)?.label ?? value;\n\nexport default function ItemsBoard({ date, items }: ItemsBoardProps) {\n  const router = useRouter();\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [type, setType] = useState(\"NOTE\");\n  const [block, setBlock] = useState(\"ALL_DAY\");\n  const [error, setError] = useState<string | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [editingId, setEditingId] = useState<string | null>(null);\n  const [editTitle, setEditTitle] = useState(\"\");\n  const [editDescription, setEditDescription] = useState(\"\");\n  const [editType, setEditType] = useState(\"NOTE\");\n  const [editBlock, setEditBlock] = useState(\"ALL_DAY\");\n\n  const grouped = useMemo(() => {\n    return BLOCKS.map((blockItem) => ({\n      block: blockItem.value,\n      label: blockItem.label,\n      items: items.filter((item) => item.block === blockItem.value),\n    }));\n  }, [items]);\n\n  const resetForm = () => {\n    setTitle(\"\");\n    setDescription(\"\");\n    setType(\"NOTE\");\n    setBlock(\"ALL_DAY\");\n  };\n\n  const startEdit = (item: ItemView) => {\n    setEditingId(item.id);\n    setEditTitle(item.title);\n    setEditDescription(item.description ?? \"\");\n    setEditType(item.type);\n    setEditBlock(item.block);\n  };\n\n  const cancelEdit = () => {\n    setEditingId(null);\n    setEditTitle(\"\");\n    setEditDescription(\"\");\n    setEditType(\"NOTE\");\n    setEditBlock(\"ALL_DAY\");\n  };\n\n  const submitNew = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    setError(null);\n\n    if (!title.trim()) {\n      setError(\"Completa el titulo.\");\n      return;\n    }\n\n    setIsSubmitting(true);\n    try {\n      const response = await fetch(\"/api/items\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          date,\n          block,\n          type,\n          title,\n          description,\n        }),\n      });\n\n      if (!response.ok) {\n        const data = await response.json().catch(() => null);\n        setError(data?.error ?? \"No se pudo guardar el elemento.\");\n        return;\n      }\n\n      resetForm();\n      router.refresh();\n    } catch (err) {\n      setError(\"No se pudo conectar con el servidor.\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const submitEdit = async () => {\n    if (!editingId) return;\n\n    setError(null);\n    setIsSubmitting(true);\n\n    try {\n      const response = await fetch(`/api/items/${editingId}`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          title: editTitle,\n          description: editDescription,\n          type: editType,\n          block: editBlock,\n        }),\n      });\n\n      if (!response.ok) {\n        const data = await response.json().catch(() => null);\n        setError(data?.error ?? \"No se pudo guardar el elemento.\");\n        return;\n      }\n\n      cancelEdit();\n      router.refresh();\n    } catch (err) {\n      setError(\"No se pudo conectar con el servidor.\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const deleteItem = async (id: string) => {\n    const confirmed = window.confirm(\"Eliminar este elemento?\");\n    if (!confirmed) return;\n\n    setError(null);\n    setIsSubmitting(true);\n    try {\n      const response = await fetch(`/api/items/${id}`, {\n        method: \"DELETE\",\n      });\n\n      if (!response.ok) {\n        const data = await response.json().catch(() => null);\n        setError(data?.error ?? \"No se pudo eliminar el elemento.\");\n        return;\n      }\n\n      router.refresh();\n    } catch (err) {\n      setError(\"No se pudo conectar con el servidor.\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"rounded-3xl border border-slate-800 bg-slate-900/70 p-6 shadow-lg shadow-black/30\">\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-lg font-semibold text-slate-100\">Elementos del dia</h2>\n        <span className=\"text-xs uppercase tracking-[0.2em] text-slate-500\">\n          {items.length} elementos\n        </span>\n      </div>\n\n      <div className=\"mt-5 space-y-6\">\n        {grouped.map((group) => (\n          <div key={group.block} className=\"space-y-3\">\n            <div className=\"flex items-center justify-between text-xs text-slate-500\">\n              <span className=\"uppercase tracking-[0.3em]\">{group.label}</span>\n              <span>{group.items.length}</span>\n            </div>\n            {group.items.length === 0 ? (\n              <div className=\"rounded-2xl border border-dashed border-slate-700 bg-slate-900/40 p-4 text-sm text-slate-400\">\n                Sin elementos todavia.\n              </div>\n            ) : (\n              <div className=\"grid gap-3 sm:grid-cols-2\">\n                {group.items.map((item) => (\n                  <div\n                    key={item.id}\n                    className=\"rounded-2xl border border-slate-800 bg-slate-900/60 p-4 shadow-lg shadow-black/20\"\n                  >\n                    {editingId === item.id ? (\n                      <div className=\"space-y-3\">\n                        <div className=\"grid gap-3 sm:grid-cols-2\">\n                          <div>\n                            <label className=\"text-xs font-semibold text-slate-300\">\n                              Bloque\n                            </label>\n                            <select\n                              className=\"mt-2 w-full rounded-xl border border-slate-700 bg-slate-950/40 px-3 py-2 text-sm text-slate-100 outline-none transition focus:border-cyan-400/70\"\n                              value={editBlock}\n                              onChange={(event) =>\n                                setEditBlock(event.target.value)\n                              }\n                            >\n                              {BLOCKS.map((option) => (\n                                <option key={option.value} value={option.value}>\n                                  {option.label}\n                                </option>\n                              ))}\n                            </select>\n                          </div>\n                          <div>\n                            <label className=\"text-xs font-semibold text-slate-300\">\n                              Tipo\n                            </label>\n                            <select\n                              className=\"mt-2 w-full rounded-xl border border-slate-700 bg-slate-950/40 px-3 py-2 text-sm text-slate-100 outline-none transition focus:border-cyan-400/70\"\n                              value={editType}\n                              onChange={(event) =>\n                                setEditType(event.target.value)\n                              }\n                            >\n                              {ITEM_TYPES.map((option) => (\n                                <option\n                                  key={option.value}\n                                  value={option.value}\n                                >\n                                  {option.label}\n                                </option>\n                              ))}\n                            </select>\n                          </div>\n                        </div>\n                        <div>\n                          <label className=\"text-xs font-semibold text-slate-300\">\n                            Titulo\n                          </label>\n                          <input\n                            className=\"mt-2 w-full rounded-xl border border-slate-700 bg-slate-950/40 px-3 py-2 text-sm text-slate-100 outline-none transition focus:border-cyan-400/70\"\n                            value={editTitle}\n                            onChange={(event) =>\n                              setEditTitle(event.target.value)\n                            }\n                          />\n                        </div>\n                        <div>\n                          <label className=\"text-xs font-semibold text-slate-300\">\n                            Descripcion\n                          </label>\n                          <textarea\n                            rows={3}\n                            className=\"mt-2 w-full rounded-xl border border-slate-700 bg-slate-950/40 px-3 py-2 text-sm text-slate-100 outline-none transition focus:border-cyan-400/70\"\n                            value={editDescription}\n                            onChange={(event) =>\n                              setEditDescription(event.target.value)\n                            }\n                          />\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          <button\n                            type=\"button\"\n                            onClick={submitEdit}\n                            disabled={isSubmitting}\n                            className=\"rounded-xl bg-cyan-400 px-4 py-2 text-xs font-semibold text-slate-950 transition hover:bg-cyan-300 disabled:cursor-not-allowed disabled:opacity-70\"\n                          >\n                            Guardar\n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={cancelEdit}\n                            className=\"rounded-xl border border-slate-700 px-4 py-2 text-xs font-semibold text-slate-200 transition hover:border-slate-500\"\n                          >\n                            Cancelar\n                          </button>\n                        </div>\n                      </div>\n                    ) : (\n                      <>\n                        <div className=\"flex items-center justify-between text-xs text-slate-400\">\n                          <span className=\"uppercase tracking-[0.2em]\">\n                            {getTypeLabel(item.type)}\n                          </span>\n                        </div>\n                        <h3 className=\"mt-2 text-sm font-semibold text-slate-100\">\n                          {item.title}\n                        </h3>\n                        {item.description ? (\n                          <p className=\"mt-2 text-sm text-slate-300\">\n                            {item.description}\n                          </p>\n                        ) : null}\n                        <div className=\"mt-4 flex items-center gap-2\">\n                          <button\n                            type=\"button\"\n                            onClick={() => startEdit(item)}\n                            className=\"rounded-xl border border-slate-700 px-3 py-2 text-xs font-semibold text-slate-200 transition hover:border-slate-500\"\n                          >\n                            Editar\n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => deleteItem(item.id)}\n                            className=\"rounded-xl border border-rose-500/40 px-3 py-2 text-xs font-semibold text-rose-200 transition hover:border-rose-400\"\n                          >\n                            Eliminar\n                          </button>\n                        </div>\n                      </>\n                    )}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n\n      <form onSubmit={submitNew} className=\"mt-6 grid gap-3\">\n        <div className=\"grid gap-3 sm:grid-cols-3\">\n          <div>\n            <label className=\"text-xs font-semibold text-slate-300\">Bloque</label>\n            <select\n              className=\"mt-2 w-full rounded-xl border border-slate-700 bg-slate-950/40 px-3 py-2 text-sm text-slate-100 outline-none transition focus:border-cyan-400/70\"\n              value={block}\n              onChange={(event) => setBlock(event.target.value)}\n            >\n              {BLOCKS.map((option) => (\n                <option key={option.value} value={option.value}>\n                  {option.label}\n                </option>\n              ))}\n            </select>\n          </div>\n          <div>\n            <label className=\"text-xs font-semibold text-slate-300\">Tipo</label>\n            <select\n              className=\"mt-2 w-full rounded-xl border border-slate-700 bg-slate-950/40 px-3 py-2 text-sm text-slate-100 outline-none transition focus:border-cyan-400/70\"\n              value={type}\n              onChange={(event) => setType(event.target.value)}\n            >\n              {ITEM_TYPES.map((option) => (\n                <option key={option.value} value={option.value}>\n                  {option.label}\n                </option>\n              ))}\n            </select>\n          </div>\n          <div>\n            <label className=\"text-xs font-semibold text-slate-300\">\n              Titulo\n            </label>\n            <input\n              className=\"mt-2 w-full rounded-xl border border-slate-700 bg-slate-950/40 px-3 py-2 text-sm text-slate-100 outline-none transition focus:border-cyan-400/70\"\n              placeholder=\"Ej: Check-in del hotel\"\n              value={title}\n              onChange={(event) => setTitle(event.target.value)}\n            />\n          </div>\n        </div>\n        <div>\n          <label className=\"text-xs font-semibold text-slate-300\">\n            Descripcion\n          </label>\n          <textarea\n            rows={3}\n            className=\"mt-2 w-full rounded-xl border border-slate-700 bg-slate-950/40 px-3 py-2 text-sm text-slate-100 outline-none transition focus:border-cyan-400/70\"\n            placeholder=\"Detalles o notas.\"\n            value={description}\n            onChange={(event) => setDescription(event.target.value)}\n          />\n        </div>\n\n        {error ? (\n          <div className=\"rounded-2xl border border-rose-500/30 bg-rose-500/10 px-4 py-3 text-sm text-rose-200\">\n            {error}\n          </div>\n        ) : null}\n\n        <button\n          type=\"submit\"\n          disabled={isSubmitting}\n          className=\"rounded-2xl bg-cyan-400 px-5 py-3 text-sm font-semibold text-slate-950 transition hover:bg-cyan-300 disabled:cursor-not-allowed disabled:opacity-70\"\n        >\n          {isSubmitting ? \"Guardando...\" : \"Agregar elemento\"}\n        </button>\n      </form>\n    </div>\n  );\n}\n\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 866, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/esteb/Desktop/travel_app/app/day/%5Bdate%5D/AttachmentsPanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\n\ntype AttachmentView = {\n  id: string;\n  fileName: string;\n  mimeType: string;\n  sizeBytes: number;\n  path: string;\n};\n\ntype AttachmentsPanelProps = {\n  date: string;\n  attachments: AttachmentView[];\n};\n\nconst formatSize = (bytes: number) => {\n  if (bytes < 1024) return `${bytes} B`;\n  const kb = bytes / 1024;\n  if (kb < 1024) return `${kb.toFixed(1)} KB`;\n  const mb = kb / 1024;\n  return `${mb.toFixed(1)} MB`;\n};\n\nexport default function AttachmentsPanel({\n  date,\n  attachments,\n}: AttachmentsPanelProps) {\n  const router = useRouter();\n  const [file, setFile] = useState<File | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const onSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    setError(null);\n\n    if (!file) {\n      setError(\"Selecciona un archivo.\");\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"date\", date);\n\n    setIsSubmitting(true);\n    try {\n      const response = await fetch(\"/api/attachments\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      if (!response.ok) {\n        const data = await response.json().catch(() => null);\n        setError(data?.error ?? \"No se pudo subir el archivo.\");\n        return;\n      }\n\n      setFile(null);\n      router.refresh();\n    } catch (err) {\n      setError(\"No se pudo conectar con el servidor.\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"rounded-3xl border border-slate-800 bg-slate-900/70 p-6 shadow-lg shadow-black/30\">\n      <h3 className=\"text-sm font-semibold text-slate-100\">Adjuntos</h3>\n      <p className=\"mt-2 text-sm text-slate-300\">\n        PDF o imagenes (JPG, PNG, WEBP).\n      </p>\n\n      <form onSubmit={onSubmit} className=\"mt-4 grid gap-3\">\n        <input\n          type=\"file\"\n          accept=\".pdf,image/jpeg,image/png,image/webp\"\n          className=\"block w-full text-sm text-slate-300 file:mr-4 file:rounded-xl file:border-0 file:bg-cyan-400 file:px-4 file:py-2 file:text-xs file:font-semibold file:text-slate-950\"\n          onChange={(event) => {\n            const selected = event.target.files?.[0] ?? null;\n            setFile(selected);\n          }}\n        />\n\n        {error ? (\n          <div className=\"rounded-2xl border border-rose-500/30 bg-rose-500/10 px-4 py-3 text-sm text-rose-200\">\n            {error}\n          </div>\n        ) : null}\n\n        <button\n          type=\"submit\"\n          disabled={isSubmitting}\n          className=\"rounded-2xl bg-cyan-400 px-5 py-3 text-sm font-semibold text-slate-950 transition hover:bg-cyan-300 disabled:cursor-not-allowed disabled:opacity-70\"\n        >\n          {isSubmitting ? \"Subiendo...\" : \"Subir archivo\"}\n        </button>\n      </form>\n\n      <div className=\"mt-5 space-y-3\">\n        {attachments.length === 0 ? (\n          <div className=\"rounded-2xl border border-dashed border-slate-700 bg-slate-900/40 p-4 text-sm text-slate-400\">\n            Sin adjuntos todavia.\n          </div>\n        ) : (\n          attachments.map((attachment) => (\n            <a\n              key={attachment.id}\n              href={attachment.path}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              className=\"flex items-center justify-between rounded-2xl border border-slate-800 bg-slate-900/70 px-4 py-3 text-sm text-slate-200 shadow-lg shadow-black/20 transition hover:border-slate-600\"\n            >\n              <div className=\"flex flex-col\">\n                <span className=\"font-semibold text-slate-100\">\n                  {attachment.fileName}\n                </span>\n                <span className=\"text-xs text-slate-400\">\n                  {attachment.mimeType} - {formatSize(attachment.sizeBytes)}\n                </span>\n              </div>\n              <span className=\"text-xs uppercase tracking-[0.2em] text-slate-500\">\n                Ver\n              </span>\n            </a>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAkBA,MAAM,aAAa,CAAC;IAClB,IAAI,QAAQ,MAAM,OAAO,GAAG,MAAM,EAAE,CAAC;IACrC,MAAM,KAAK,QAAQ;IACnB,IAAI,KAAK,MAAM,OAAO,GAAG,GAAG,OAAO,CAAC,GAAG,GAAG,CAAC;IAC3C,MAAM,KAAK,KAAK;IAChB,OAAO,GAAG,GAAG,OAAO,CAAC,GAAG,GAAG,CAAC;AAC9B;AAEe,SAAS,iBAAiB,EACvC,IAAI,EACJ,WAAW,EACW;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,MAAM,WAAW,OAAO;QACtB,MAAM,cAAc;QACpB,SAAS;QAET,IAAI,CAAC,MAAM;YACT,SAAS;YACT;QACF;QAEA,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,QAAQ;QACxB,SAAS,MAAM,CAAC,QAAQ;QAExB,gBAAgB;QAChB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,oBAAoB;gBAC/C,QAAQ;gBACR,MAAM;YACR;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,OAAO,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM;gBAC/C,SAAS,MAAM,SAAS;gBACxB;YACF;YAEA,QAAQ;YACR,OAAO,OAAO;QAChB,EAAE,OAAO,KAAK;YACZ,SAAS;QACX,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAuC;;;;;;0BACrD,8OAAC;gBAAE,WAAU;0BAA8B;;;;;;0BAI3C,8OAAC;gBAAK,UAAU;gBAAU,WAAU;;kCAClC,8OAAC;wBACC,MAAK;wBACL,QAAO;wBACP,WAAU;wBACV,UAAU,CAAC;4BACT,MAAM,WAAW,MAAM,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI;4BAC5C,QAAQ;wBACV;;;;;;oBAGD,sBACC,8OAAC;wBAAI,WAAU;kCACZ;;;;;+BAED;kCAEJ,8OAAC;wBACC,MAAK;wBACL,UAAU;wBACV,WAAU;kCAET,eAAe,gBAAgB;;;;;;;;;;;;0BAIpC,8OAAC;gBAAI,WAAU;0BACZ,YAAY,MAAM,KAAK,kBACtB,8OAAC;oBAAI,WAAU;8BAA+F;;;;;2BAI9G,YAAY,GAAG,CAAC,CAAC,2BACf,8OAAC;wBAEC,MAAM,WAAW,IAAI;wBACrB,QAAO;wBACP,KAAI;wBACJ,WAAU;;0CAEV,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAK,WAAU;kDACb,WAAW,QAAQ;;;;;;kDAEtB,8OAAC;wCAAK,WAAU;;4CACb,WAAW,QAAQ;4CAAC;4CAAI,WAAW,WAAW,SAAS;;;;;;;;;;;;;0CAG5D,8OAAC;gCAAK,WAAU;0CAAoD;;;;;;;uBAd/D,WAAW,EAAE;;;;;;;;;;;;;;;;AAuBhC"}}]
}